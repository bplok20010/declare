(function(t,e){typeof exports==="object"&&typeof module!=="undefined"?e(exports):typeof define==="function"&&define.amd?define(["exports"],e):e(t.declare=t.declare||{})})(this,function(t){"use strict";var e=/\.(_super|call\(this|apply\(this)/;var n=Function.prototype.toString;var r=function(){var t=n.call(function(){return this}).indexOf("return this")>-1;if(t){return function t(r){return e.test(n.call(r))}}return function t(){return true}}();function i(){}i.__hasSuper=false;function o(t){if(t.__hasSuper===undefined){t.__hasSuper=r(t)}return t.__hasSuper}function u(t,e){if(!o(t)){return t}if(!e.wrappedFunction&&o(e)){return a(t,a(e,i))}return a(t,e)}function a(t,e){function n(){var n=this._super;this._super=e;var r=t.apply(this,arguments);this._super=n;return r}n.wrappedFunction=t;return n}var s=Object.prototype.toString;function f(t){return s.call(t)==="[object Function]"}function c(t){return s.call(t)==="[object Array]"}function l(t){return s.call(t)==="[object Object]"}function p(t){if(Object.assign){return Object.assign.apply(Object,arguments)}if(t===undefined||t===null){throw new TypeError("Cannot convert undefined or null to object")}var e=Object(t);for(var n=1;n<arguments.length;n++){var r=arguments[n];if(r!==undefined&&r!==null){for(var i in r){if(r.hasOwnProperty(i)){e[i]=r[i]}}}}return e}var h=function(){};function y(t){throw new Error("declare: "+t)}function g(){}g.prototype={$isInstance:true,self:g,superclass:null,superproto:null,_super:h,initConfig:function(){this.config=p({},this.self.getDefaultMixinConfig(),this.self.getDefaultConfig())},constructor:function(){this.initConfig()}};g.setDefaultConfig=function(t){var e=this.getDefaultConfig;this.getDefaultConfig=function(){var n=e();return p(n,f(t)?t(n):t)}};g.getDefaultConfig=function(){return Object.create?Object.create(null):{}};g.setDefaultMixinConfig=function(t){var e=this.getDefaultMixinConfig;this.getDefaultMixinConfig=function(){var n=e();return p(n,f(t)?t(n):t)}};g.getDefaultMixinConfig=function(){return Object.create?Object.create(null):{}};g.create=function(t){var e=this;function n(t){var e=function(){};e.prototype=t.prototype;return e}var r=new(n(e));e.apply(r,arguments);return r};g.extend=function(t){j(this.prototype,t)};var v=1;var d=1<<1;var C={$isInstance:d,superclass:v|d,superproto:v|d,self:d,displayName:v,$isClass:v};function b(t){if(Object.__proto__){return{__proto__:t}}else{var e=function(){};e.prototype=t;var n=new e;e.prototype=null;return n}}function _(t,e){for(var n in e){if(C.hasOwnProperty(n)&&C[n]&v)continue;if(e.hasOwnProperty(n)){t[n]=e[n]}}t.prototype=b(e.prototype);return t}function w(){function t(){if(!(this instanceof t)){return t.create.apply(t,arguments)}var e=arguments;switch(e.length){case 0:this.constructor();break;case 1:this.constructor(e[0]);break;case 2:this.constructor(e[0],e[1]);break;case 3:this.constructor(e[0],e[1],e[2]);break;case 4:this.constructor(e[0],e[1],e[2],e[3]);break;default:this.constructor.apply(this,e)}}return t}function x(t){var e=w();_(e,g);if(t===null){t="anonymous"}e.displayName=t;e.$isClass=true;e.superclass=e.prototype.superclass=g;e.superproto=e.prototype.superproto=g.prototype;e.prototype.self=e;return e}function D(t,e,n){var r=arguments;if(!r.length){y("Invalid parameter. unknown base class.")}if(r.length===1){if(f(t)){e=t;t=null}else if(t&&l(t)){e=null;n=t;t=null}}if(r.length===2){if(typeof t==="string"){if(e&&l(e)){n=e;e=null}}else{n=e;e=t;t=null}}var i=x(t);var o=i.prototype;if(e){if(!f(e)){throw new TypeError("Error declare: superclass is not a callable constructor.")}_(i,e);i.superclass=i.prototype.superclass=e;i.superproto=i.prototype.superproto=e.prototype}if(n){if(n.mixins){var u=c(n.mixins)?n.mixins:[n.mixins];delete n.mixins;for(var a=0;a<u.length;a++){var s=u[a];O(o,f(s)?s.prototype:s);if(s.$isClass){i.setDefaultMixinConfig(s.getDefaultMixinConfig);i.setDefaultMixinConfig(s.getDefaultConfig)}}}if(n.getDefaultConfig){i.setDefaultConfig(n.getDefaultConfig);delete n.getDefaultConfig}if(n.displayName){i.displayName=n.displayName;delete n.displayName}j(i,n)}i.prototype.self=i;return i}function O(t,e){for(var n in e){if(n==="constructor")continue;t[n]=e[n]}}function j(t,e){var n=t.prototype;var r=void 0;for(r in e){if(e.hasOwnProperty(r)){if(C.hasOwnProperty(r)&&C[r]&d)continue;var i=n[r];var o=e[r];if(f(o)&&i&&f(i)&&!n.hasOwnProperty(r)){o=u(o,i)}n[r]=o}}return t}t["default"]=D});